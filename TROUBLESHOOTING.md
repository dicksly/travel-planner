# 🔧 故障排除指南

## 问题：卡在第二个页面不动

### 原因分析
1. **API配置问题** - 使用了无效的API密钥或Bot ID
2. **网络连接问题** - 无法连接到Coze API服务器
3. **CORS问题** - 浏览器阻止了跨域请求
4. **JavaScript错误** - 代码执行出现异常

### 解决方案

#### 1. 使用演示模式（推荐）
已将配置文件中的 `enableRealAI` 设置为 `false`，现在会自动使用演示模式：

```javascript
// config.js
APP: {
    enableRealAI: false,  // 使用演示模式
}
```

#### 2. 调试工具使用
创建了专门的调试页面 `debug.html`，可以用来：
- 检查系统状态
- 快速测试功能
- 查看实时日志
- 切换AI模式

**使用方法：**
```bash
# 在浏览器中打开
http://localhost:8000/debug.html
```

#### 3. 检查浏览器控制台
1. 按 F12 打开开发者工具
2. 切换到 Console 选项卡
3. 查看是否有错误信息
4. 现在会有详细的调试日志输出

#### 4. 如果需要使用真实AI
如果您有有效的Coze API密钥，请：

1. 修改 `config.js` 文件：
```javascript
COZE_API: {
    endpoint: 'https://api.coze.cn/v3/chat',
    token: 'your_actual_token_here',      // 替换为您的实际token
    bot_id: 'your_actual_bot_id_here'     // 替换为您的实际bot_id
},
APP: {
    enableRealAI: true,  // 启用真实AI
}
```

2. 重新加载页面测试

### 最新修复内容

#### 1. 配置修改
- 默认禁用了真实AI功能，使用演示模式
- 增加了更多调试选项

#### 2. 错误处理增强
- 添加了详细的控制台日志
- 改进了错误回退机制
- 增加了步骤状态跟踪

#### 3. 调试功能
- 创建了专门的调试页面
- 添加了快速测试功能
- 提供了实时日志查看

#### 4. 代码优化
- 重置了步骤计数器
- 改进了模拟模式的执行逻辑
- 增加了更多状态检查

### 测试步骤

1. **使用调试页面测试**：
   ```bash
   # 打开调试页面
   open http://localhost:8000/debug.html
   ```

2. **使用主应用测试**：
   ```bash
   # 打开主应用
   open http://localhost:8000/index.html
   ```

3. **观察控制台日志**：
   - 填写表单并提交
   - 观察控制台输出的详细日志
   - 确认演示模式正常工作

### 常见问题

#### Q1: 仍然卡在第二个页面？
- 检查浏览器控制台是否有JavaScript错误
- 确认 `config.js` 文件正确加载
- 使用调试页面进行快速测试

#### Q2: 想要使用真实AI功能？
- 需要有效的Coze API密钥
- 修改配置文件中的token和bot_id
- 将 `enableRealAI` 设置为 `true`

#### Q3: 演示模式不工作？
- 检查 `mockStepDelay` 配置
- 确认没有JavaScript错误
- 尝试刷新页面

### 联系支持
如果问题仍然存在，请：
1. 提供浏览器控制台的错误信息
2. 说明使用的浏览器版本
3. 描述具体的操作步骤
4. 提供调试页面的测试结果

---

## 功能验证清单

- [ ] 表单填写正常
- [ ] 步骤2显示AI处理动画
- [ ] 所有5个步骤依次完成
- [ ] 步骤3显示最终旅行攻略
- [ ] 下载功能正常工作
- [ ] 返回按钮正常工作
- [ ] 调试页面功能正常
- [ ] 控制台日志详细清晰 