# 🧪 AI功能测试指南

## 📋 测试前准备

### 1. 配置API密钥
编辑 `config.js` 文件，替换为您的真实API信息：
```javascript
const CONFIG = {
    COZE_API: {
        endpoint: 'https://api.coze.cn/v3/chat',
        token: 'YOUR_ACTUAL_TOKEN',           // ⚠️ 必须替换
        bot_id: 'YOUR_ACTUAL_BOT_ID'         // ⚠️ 必须替换
    },
    APP: {
        enableRealAI: true,                  // 确保为true
        typewriterSpeed: 30,
        maxRetries: 3,
        mockStepDelay: 2000
    }
};
```

### 2. 获取Coze API密钥步骤
1. 访问 [Coze官网](https://www.coze.cn/)
2. 注册/登录账户
3. 创建新的Bot应用
4. 在API设置中获取Token和Bot ID
5. 确保Bot具有旅行规划相关的工具和知识

## 🔍 测试功能点

### 基础功能测试
- [ ] 表单填写和验证
- [ ] 数字输入控件（+/-按钮）
- [ ] 日期选择器
- [ ] 预算选择
- [ ] 个性化需求输入

### AI功能测试

#### 1. 演示模式测试
```javascript
// 在config.js中设置
enableRealAI: false
```
- [ ] 模拟AI处理步骤
- [ ] 步骤状态变化动画
- [ ] 生成预设攻略内容
- [ ] 攻略下载功能

#### 2. 真实AI模式测试
```javascript
// 在config.js中设置
enableRealAI: true
```
- [ ] API连接成功
- [ ] 流式响应处理
- [ ] 工具调用过程显示
- [ ] 打字机效果展示
- [ ] Markdown内容渲染
- [ ] 错误处理机制

## 📝 测试用例

### 测试用例1：基本旅行需求
```
出发地：北京
目的地：上海
日期：2024年8月1日 - 2024年8月5日
人数：2成人
预算：¥5000-10000
需求：想要体验上海的现代化和传统文化，包含外滩、迪士尼等景点
```

### 测试用例2：亲子旅行
```
出发地：广州
目的地：三亚
日期：2024年7月20日 - 2024年7月25日
人数：2成人，1儿童
预算：¥10000以上
需求：适合带孩子的海边度假，包含亲子酒店和儿童友好的活动
```

### 测试用例3：预算旅行
```
出发地：杭州
目的地：西安
日期：2024年9月1日 - 2024年9月4日
人数：1成人
预算：¥1000-5000
需求：学生党预算旅行，希望深度体验历史文化，推荐性价比高的住宿和美食
```

## 🔧 调试模式

### 启用详细日志
```javascript
// 在config.js中设置
DEBUG: {
    enableLogging: true,
    logApiResponse: true
}
```

### 浏览器开发者工具
1. 按F12打开开发者工具
2. 查看Console面板的日志输出
3. 监控Network面板的API请求
4. 检查可能的错误信息

## 🐛 常见问题排查

### API调用失败
**症状**：显示"AI服务暂时不可用"
**检查项**：
- [ ] API token是否正确
- [ ] Bot ID是否正确
- [ ] 网络连接是否正常
- [ ] 是否有CORS限制

### 流式响应问题
**症状**：打字机效果不显示
**检查项**：
- [ ] 浏览器是否支持fetch API
- [ ] 响应格式是否正确
- [ ] 是否收到message.delta事件

### 配置文件错误
**症状**：页面加载失败
**检查项**：
- [ ] config.js语法是否正确
- [ ] 是否正确引入config.js
- [ ] CONFIG对象是否定义

## 📊 性能测试

### 响应时间测试
- 表单提交到AI响应开始：< 3秒
- 工具调用过程展示：实时更新
- 打字机效果流畅度：无卡顿
- 攻略生成完成时间：< 30秒

### 浏览器兼容性
- [ ] Chrome 90+
- [ ] Firefox 88+
- [ ] Safari 14+
- [ ] Edge 90+

## 🎯 测试建议

### 1. 逐步测试
1. 先测试演示模式功能
2. 确认API配置正确
3. 测试真实AI模式
4. 验证错误处理

### 2. 不同场景测试
- 不同类型的旅行需求
- 不同预算范围
- 不同人数组合
- 不同时间长度

### 3. 边界条件测试
- 极短行程（1天）
- 极长行程（30天）
- 极低预算（< ¥500）
- 极高预算（> ¥50000）

## 📞 技术支持

如遇到问题，请：
1. 检查浏览器控制台错误信息
2. 确认API配置正确性
3. 尝试切换到演示模式验证基础功能
4. 查看Network面板检查API请求状态

---

**祝您测试顺利！🎉**

> 如果一切正常，您的AI旅行规划助手就可以为用户提供真正智能的旅行建议了！ 